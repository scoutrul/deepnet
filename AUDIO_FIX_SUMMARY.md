# –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ –ø—Ä–æ–±–ª–µ–º—ã —Å –æ—Å—Ç–∞–Ω–æ–≤–∫–æ–π –∞—É–¥–∏–æ

## üêõ –ü—Ä–æ–±–ª–µ–º–∞
–ü–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏ –∑–∞–ø–∏—Å–∏ –∞—É–¥–∏–æ –ø—Ä–æ–¥–æ–ª–∂–∞–ª–æ –æ—Ç–ø—Ä–∞–≤–ª—è—Ç—å—Å—è –≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω—É—é –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—é, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫:
- –õ–æ–≥–∞–º "–ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏"
- –û—Ç—Å—É—Ç—Å—Ç–≤–∏—é —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏—è —Ä–µ—á–∏
- –ù–µ–∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ–π —Ä–∞–±–æ—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏—è

## üîß –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. AudioMixerService
**–§–∞–π–ª**: `src/services/voice/audioMixerService.ts`

- **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤ `ondataavailable`:
  ```typescript
  if (!this.state.isActive) {
    console.log('üéß [AUDIO_MIXER] –ò–≥–Ω–æ—Ä–∏—Ä—É–µ–º –∞—É–¥–∏–æ –¥–∞–Ω–Ω—ã–µ - –º–∏–∫—à–∏—Ä–æ–≤–∞–Ω–∏–µ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ')
    return
  }
  ```

- **–†–∞–Ω–Ω–µ–µ –æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤ `stopMixing()`:
  ```typescript
  // –°–Ω–∞—á–∞–ª–∞ –ø–æ–º–µ—á–∞–µ–º –∫–∞–∫ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–µ, —á—Ç–æ–±—ã –æ—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –æ–±—Ä–∞–±–æ—Ç–∫—É –∞—É–¥–∏–æ
  this.state.isActive = false
  this.emitStateChange()
  ```

### 2. DiarizationService
**–§–∞–π–ª**: `src/services/voice/diarizationService.ts`

- **–£–ª—É—á—à–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è** –≤ `sendAudio()`:
  ```typescript
  if (!this.isActive) {
    console.warn('üé§ [DIARIZATION] –ü–æ–ø—ã—Ç–∫–∞ –æ—Ç–ø—Ä–∞–≤–∫–∏ –∞—É–¥–∏–æ –ø—Ä–∏ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏ - –∏–≥–Ω–æ—Ä–∏—Ä—É–µ–º')
    return
  }

  if (!this.connection) {
    console.warn('üé§ [DIARIZATION] –°–æ–µ–¥–∏–Ω–µ–Ω–∏–µ –∑–∞–∫—Ä—ã—Ç–æ - –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞—É–¥–∏–æ')
    return
  }
  ```

### 3. UIBusinessAdapter
**–§–∞–π–ª**: `src/adapters/uiBusinessAdapter.ts`

- **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Å–æ—Å—Ç–æ—è–Ω–∏—è –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏** –ø–µ—Ä–µ–¥ –æ—Ç–ø—Ä–∞–≤–∫–æ–π –∞—É–¥–∏–æ:
  ```typescript
  const diarizationState = diarizationService.getState()
  if (!diarizationState.isActive) {
    console.warn('üé≠ [ADAPTER] –î–∏–∞—Ä–∏–∑–∞—Ü–∏—è –Ω–µ–∞–∫—Ç–∏–≤–Ω–∞ - –Ω–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ–º –∞—É–¥–∏–æ')
    return
  }
  ```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç

–¢–µ–ø–µ—Ä—å –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ:
1. **–û—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç –æ–±—Ä–∞–±–æ—Ç–∫—É –∞—É–¥–∏–æ** —Å—Ä–∞–∑—É –ø—Ä–∏ –Ω–∞–∂–∞—Ç–∏–∏ "–û—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –∑–∞–ø–∏—Å—å"
2. **–ù–µ –æ—Ç–ø—Ä–∞–≤–ª—è–µ—Ç –∞—É–¥–∏–æ** –≤ –Ω–µ–∞–∫—Ç–∏–≤–Ω—É—é –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—é
3. **–ü–æ–∫–∞–∑—ã–≤–∞–µ—Ç –ø—Ä–∞–≤–∏–ª—å–Ω—ã–µ –ª–æ–≥–∏** –±–µ–∑ –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π
4. **–†–∞–±–æ—Ç–∞–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ** –ø—Ä–∏ –º–Ω–æ–≥–æ–∫—Ä–∞—Ç–Ω—ã—Ö –∑–∞–ø—É—Å–∫–∞—Ö/–æ—Å—Ç–∞–Ω–æ–≤–∫–∞—Ö

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

–î–ª—è –ø—Ä–æ–≤–µ—Ä–∫–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π:
1. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–ø–∏—Å—å
2. –ì–æ–≤–æ—Ä–∏—Ç–µ –≤ –º–∏–∫—Ä–æ—Ñ–æ–Ω
3. –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ –∑–∞–ø–∏—Å—å
4. –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –ª–æ–≥–∏ - –Ω–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–µ–Ω–∏–π –æ –Ω–µ–∞–∫—Ç–∏–≤–Ω–æ–π –¥–∏–∞—Ä–∏–∑–∞—Ü–∏–∏
5. –ó–∞–ø—É—Å—Ç–∏—Ç–µ –∑–∞–ø–∏—Å—å —Å–Ω–æ–≤–∞ - –¥–æ–ª–∂–Ω–æ —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

## üìù –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∞—è –∏–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è

**–ü—Ä–∏—á–∏–Ω–∞ –ø—Ä–æ–±–ª–µ–º—ã**: `MediaRecorder` –ø—Ä–æ–¥–æ–ª–∂–∞–µ—Ç –≥–µ–Ω–µ—Ä–∏—Ä–æ–≤–∞—Ç—å —Å–æ–±—ã—Ç–∏—è `ondataavailable` –¥–∞–∂–µ –ø–æ—Å–ª–µ –≤—ã–∑–æ–≤–∞ `stop()`, —á—Ç–æ –ø—Ä–∏–≤–æ–¥–∏–ª–æ –∫ –æ—Ç–ø—Ä–∞–≤–∫–µ –∞—É–¥–∏–æ –≤ —É–∂–µ –æ—Å—Ç–∞–Ω–æ–≤–ª–µ–Ω–Ω—É—é –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—é.

**–†–µ—à–µ–Ω–∏–µ**: –î–æ–±–∞–≤–ª–µ–Ω—ã –ø—Ä–æ–≤–µ—Ä–∫–∏ —Å–æ—Å—Ç–æ—è–Ω–∏—è –Ω–∞ –≤—Å–µ—Ö —É—Ä–æ–≤–Ω—è—Ö (–º–∏–∫—à–µ—Ä ‚Üí –∞–¥–∞–ø—Ç–µ—Ä ‚Üí –¥–∏–∞—Ä–∏–∑–∞—Ü–∏—è) –¥–ª—è –ø—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–µ–Ω–∏—è –æ–±—Ä–∞–±–æ—Ç–∫–∏ –∞—É–¥–∏–æ –ø–æ—Å–ª–µ –æ—Å—Ç–∞–Ω–æ–≤–∫–∏.
