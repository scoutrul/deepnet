# –û—Ç–ª–∞–¥–∫–∞ DeepGram - Cannot read properties of undefined (reading 'listen')

## üö® –ü—Ä–æ–±–ª–µ–º–∞

```
TypeError: Cannot read properties of undefined (reading 'listen')
at DeepGramVoiceService.initializeConnection (deepgramVoiceService.ts:215:37)
```

## ‚úÖ –ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è

### 1. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏ DeepGram –∫–ª–∏–µ–Ω—Ç–∞**

```javascript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ DeepGram –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
if (!this.deepgram) {
  console.error('üé§ [DEEPGRAM] DeepGram client not initialized')
  throw new Error('DeepGram –∫–ª–∏–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω')
}
```

### 2. **–£–ª—É—á—à–µ–Ω–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è –≤ –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä–µ**

```javascript
private initializeDeepGram(): void {
  try {
    // ... –ø—Ä–æ–≤–µ—Ä–∫–∏ API –∫–ª—é—á–∞ ...
    
    this.deepgram = createClient(this.config.apiKey)
    
    // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ –∫–ª–∏–µ–Ω—Ç —Å–æ–∑–¥–∞–ª—Å—è
    if (!this.deepgram) {
      throw new Error('–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å DeepGram –∫–ª–∏–µ–Ω—Ç')
    }
    
    console.log('üé§ [DEEPGRAM] DeepGram client initialized successfully')
  } catch (error) {
    console.error('üé§ [DEEPGRAM] Failed to initialize DeepGram client:', error)
    this.deepgram = null // –Ø–≤–Ω–æ —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ–º null
    // –í—ã–±—Ä–∞—Å—ã–≤–∞–µ–º –æ—à–∏–±–∫—É, —á—Ç–æ–±—ã –∫–æ–Ω—Å—Ç—Ä—É–∫—Ç–æ—Ä –∑–Ω–∞–ª –æ–± –æ—à–∏–±–∫–µ
    throw error
  }
}
```

### 3. **–î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ –≤ –º–µ—Ç–æ–¥ start()**

```javascript
async start(): Promise<void> {
  // –ü—Ä–æ–≤–µ—Ä—è–µ–º, —á—Ç–æ DeepGram –∫–ª–∏–µ–Ω—Ç –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
  if (!this.deepgram) {
    console.error('üé§ [DEEPGRAM] DeepGram client not initialized')
    throw new Error('DeepGram –∫–ª–∏–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω')
  }
  
  // ... –æ—Å—Ç–∞–ª—å–Ω–æ–π –∫–æ–¥ ...
}
```

## üîç –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞

### –ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∫–æ–Ω—Å–æ–ª—å –±—Ä–∞—É–∑–µ—Ä–∞:

**‚úÖ –ü—Ä–∞–≤–∏–ª—å–Ω–∞—è –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è:**
```
üé§ [DEEPGRAM] API Key: sk-1234567...
üé§ [DEEPGRAM] DeepGram client initialized successfully
üé§ [DEEPGRAM] Starting voice recognition...
üé§ [DEEPGRAM] Creating DeepGram connection with options: {...}
```

**‚ùå –û—à–∏–±–∫–∞ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏–∏:**
```
üé§ [DEEPGRAM] API Key: NOT PROVIDED
üé§ [DEEPGRAM] Failed to initialize DeepGram client: API –∫–ª—é—á DeepGram –Ω–µ –ø—Ä–µ–¥–æ—Å—Ç–∞–≤–ª–µ–Ω
üé§ [FACTORY] Failed to create DeepGram service, falling back to Web Speech API
```

**‚ùå –û—à–∏–±–∫–∞ –ø—Ä–∏ –∑–∞–ø—É—Å–∫–µ:**
```
üé§ [DEEPGRAM] DeepGram client not initialized
üé§ [DEEPGRAM] Failed to start voice recognition: DeepGram –∫–ª–∏–µ–Ω—Ç –Ω–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä–æ–≤–∞–Ω
```

## üõ†Ô∏è –ö–∞–∫ –∏—Å–ø—Ä–∞–≤–∏—Ç—å

### 1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á DeepGram**

–£–±–µ–¥–∏—Ç–µ—Å—å, —á—Ç–æ –≤ `.env` —Ñ–∞–π–ª–µ –µ—Å—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π –∫–ª—é—á:

```bash
VITE_DEEPGRAM_API_KEY=sk-your-key-here
```

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Ñ–æ—Ä–º–∞—Ç –∫–ª—é—á–∞**

–ö–ª—é—á –¥–æ–ª–∂–µ–Ω:
- –ù–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk-`
- –ë—ã—Ç—å –¥–ª–∏–Ω–æ–π –ø—Ä–∏–º–µ—Ä–Ω–æ 40-50 —Å–∏–º–≤–æ–ª–æ–≤
- –ë—ã—Ç—å –¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª—å–Ω—ã–º (–ø–æ–ª—É—á–µ–Ω –∏–∑ DeepGram Console)

### 3. **–ü–æ–ª—É—á–∏—Ç–µ –Ω–æ–≤—ã–π API –∫–ª—é—á**

1. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –Ω–∞ [DeepGram Console](https://console.deepgram.com/)
2. –í–æ–π–¥–∏—Ç–µ –≤ –∞–∫–∫–∞—É–Ω—Ç
3. –ü–µ—Ä–µ–π–¥–∏—Ç–µ –≤ "API Keys"
4. –°–æ–∑–¥–∞–π—Ç–µ –Ω–æ–≤—ã–π –∫–ª—é—á —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Live Streaming
5. –°–∫–æ–ø–∏—Ä—É–π—Ç–µ –∫–ª—é—á

### 4. **–ü–µ—Ä–µ–∑–∞–ø—É—Å—Ç–∏—Ç–µ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–µ**

```bash
# –û—Å—Ç–∞–Ω–æ–≤–∏—Ç–µ dev —Å–µ—Ä–≤–µ—Ä (Ctrl+C)
npm run dev
```

## üß™ –¢–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏–µ

### 1. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—é**

–í –∫–æ–Ω—Å–æ–ª–∏ –¥–æ–ª–∂–Ω—ã –±—ã—Ç—å —Å–æ–æ–±—â–µ–Ω–∏—è:
```
üé§ [DEEPGRAM] API Key: sk-1234567...
üé§ [DEEPGRAM] DeepGram client initialized successfully
```

### 2. **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ —Å—Ç–∞—Ç—É—Å –≤ –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏**

- –î–æ–ª–∂–Ω–æ –±—ã—Ç—å: "DeepGram –≥–æ—Ç–æ–≤" (–∑–µ–ª–µ–Ω—ã–π –∫—Ä—É–∂–æ–∫)
- –î–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–∏–Ω–∏–π –±–µ–π–¥–∂ "DeepGram"

### 3. **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –∑–∞–ø–∏—Å—å**

- –ù–∞–∂–º–∏—Ç–µ "–ù–∞—á–∞—Ç—å –∑–∞–ø–∏—Å—å"
- –ù–µ –¥–æ–ª–∂–Ω–æ –±—ã—Ç—å –æ—à–∏–±–æ–∫ –≤ –∫–æ–Ω—Å–æ–ª–∏
- –î–æ–ª–∂–Ω–æ –ø–æ—è–≤–∏—Ç—å—Å—è: "–ó–∞–ø–∏—Å—å –≤ –ø—Ä–æ—Ü–µ—Å—Å–µ..."

## üìä –û–∂–∏–¥–∞–µ–º–æ–µ –ø–æ–≤–µ–¥–µ–Ω–∏–µ

### –ü–æ—Å–ª–µ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏—è:

- ‚úÖ **DeepGram –∏–Ω–∏—Ü–∏–∞–ª–∏–∑–∏—Ä—É–µ—Ç—Å—è** –±–µ–∑ –æ—à–∏–±–æ–∫
- ‚úÖ **API –∫–ª—é—á –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è** –Ω–∞ –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ—Å—Ç—å
- ‚úÖ **WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** —É—Å—Ç–∞–Ω–∞–≤–ª–∏–≤–∞–µ—Ç—Å—è
- ‚úÖ **–ì–æ–ª–æ—Å–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** —Ä–∞–±–æ—Ç–∞–µ—Ç
- ‚úÖ **Fallback –Ω–∞ Web Speech API** –ø—Ä–∏ –ø—Ä–æ–±–ª–µ–º–∞—Ö

### –ï—Å–ª–∏ –ø—Ä–æ–±–ª–µ–º–∞ –æ—Å—Ç–∞–µ—Ç—Å—è:

- ‚ùå **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ API –∫–ª—é—á** - –≤–æ–∑–º–æ–∂–Ω–æ, –Ω–µ–¥–µ–π—Å—Ç–≤–∏—Ç–µ–ª–µ–Ω
- ‚ùå **–ü—Ä–æ–≤–µ—Ä—å—Ç–µ –∏–Ω—Ç–µ—Ä–Ω–µ—Ç** - DeepGram —Ç—Ä–µ–±—É–µ—Ç —Å—Ç–∞–±–∏–ª—å–Ω–æ–≥–æ —Å–æ–µ–¥–∏–Ω–µ–Ω–∏—è
- ‚ùå **–ü–æ–ø—Ä–æ–±—É–π—Ç–µ –¥—Ä—É–≥–æ–π –±—Ä–∞—É–∑–µ—Ä** - Chrome, Edge, Safari —Ä–∞–±–æ—Ç–∞—é—Ç –ª—É—á—à–µ

## üéâ –†–µ–∑—É–ª—å—Ç–∞—Ç

–ü–æ—Å–ª–µ –ø–æ–ª—É—á–µ–Ω–∏—è –ø—Ä–∞–≤–∏–ª—å–Ω–æ–≥–æ API –∫–ª—é—á–∞ DeepGram:
- **–û—à–∏–±–∫–∞ `Cannot read properties of undefined`** –∏—Å—á–µ–∑–Ω–µ—Ç
- **–ì–æ–ª–æ—Å–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** –±—É–¥–µ—Ç —Ä–∞–±–æ—Ç–∞—Ç—å –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
- **WebSocket —Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ** —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—Å—è —É—Å–ø–µ—à–Ω–æ

**DeepGram –ø–æ–ª–Ω–æ—Å—Ç—å—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª–µ–Ω!** üöÄ
