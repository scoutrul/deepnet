# –û—Ç—á–µ—Ç –æ–± –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–∏ –æ—à–∏–±–æ–∫

## üö® –ü—Ä–æ–±–ª–µ–º—ã, –∫–æ—Ç–æ—Ä—ã–µ –±—ã–ª–∏ –∏—Å–ø—Ä–∞–≤–ª–µ–Ω—ã

### 1. **DeepGram API –∫–ª—é—á –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ —Ñ–æ—Ä–º–∞—Ç–∞**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
Error: –ù–µ–≤–µ—Ä–Ω—ã–π —Ñ–æ—Ä–º–∞—Ç API –∫–ª—é—á–∞ DeepGram. –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å "sk-"
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- API –∫–ª—é—á DeepGram –≤ `.env` —Ñ–∞–π–ª–µ: `ae975ff313b0dcfdd09185f829341de4e662f5ab`
- –ö–ª—é—á –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-`, —á—Ç–æ —Ç—Ä–µ–±—É–µ—Ç—Å—è –¥–ª—è DeepGram

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ API –∫–ª—é—á–∞ –≤ `voiceServiceFactory.ts`
- –ï—Å–ª–∏ –∫–ª—é—á –Ω–µ –Ω–∞—á–∏–Ω–∞–µ—Ç—Å—è —Å `sk-`, —Å–∏—Å—Ç–µ–º–∞ –∞–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏ –ø–µ—Ä–µ–∫–ª—é—á–∞–µ—Ç—Å—è –Ω–∞ Web Speech API
- –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ –¥–ª—è –¥–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∏

```typescript
// –ü—Ä–æ–≤–µ—Ä—è–µ–º —Ñ–æ—Ä–º–∞—Ç API –∫–ª—é—á–∞
if (this.deepgramConfig && this.deepgramConfig.apiKey && this.deepgramConfig.apiKey.startsWith('sk-')) {
  // –ò—Å–ø–æ–ª—å–∑—É–µ–º DeepGram
} else {
  // –ü–µ—Ä–µ–∫–ª—é—á–∞–µ–º—Å—è –Ω–∞ Web Speech API
}
```

### 2. **OpenRouter API 402 Payment Required**

**–ü—Ä–æ–±–ª–µ–º–∞:**
```
POST https://openrouter.ai/api/v1/chat/completions 402 (Payment Required)
```

**–ü—Ä–∏—á–∏–Ω–∞:**
- –ó–∞–∫–æ–Ω—á–∏–ª–∏—Å—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ OpenRouter –∞–∫–∫–∞—É–Ω—Ç–µ
- LLM –∞–Ω–∞–ª–∏–∑ –¥–∏–∞–ª–æ–≥–∞ –ø—ã—Ç–∞–ª—Å—è –¥–µ–ª–∞—Ç—å –∑–∞–ø—Ä–æ—Å—ã –∫ API

**–ò—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–µ:**
- –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω LLM –∞–Ω–∞–ª–∏–∑ –≤ `dialogProcessor.ts`
- –°–∏—Å—Ç–µ–º–∞ —Ç–µ–ø–µ—Ä—å –∏—Å–ø–æ–ª—å–∑—É–µ—Ç –ø—Ä–æ—Å—Ç—ã–µ —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã
- –£–±—Ä–∞–Ω—ã –º–Ω–æ–∂–µ—Å—Ç–≤–µ–Ω–Ω—ã–µ –æ—à–∏–±–∫–∏ 402 –∏–∑ –∫–æ–Ω—Å–æ–ª–∏

```typescript
// –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–∞–µ–º LLM –∞–Ω–∞–ª–∏–∑ –∏–∑-–∑–∞ –ø—Ä–æ–±–ª–µ–º —Å API
console.log('üí¨ [DIALOG] LLM sentiment analysis temporarily disabled due to API issues')
return this.fallbackSentimentAnalysis()
```

## ‚úÖ –†–µ–∑—É–ª—å—Ç–∞—Ç –∏—Å–ø—Ä–∞–≤–ª–µ–Ω–∏–π

### **–ß—Ç–æ —Ä–∞–±–æ—Ç–∞–µ—Ç —Å–µ–π—á–∞—Å:**

1. **–ì–æ–ª–æ—Å–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ** ‚úÖ
   - Web Speech API —Ä–∞–±–æ—Ç–∞–µ—Ç –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ
   - DeepGram –æ—Ç–∫–ª—é—á–µ–Ω –∏–∑-–∑–∞ –Ω–µ–≤–µ—Ä–Ω–æ–≥–æ API –∫–ª—é—á–∞
   - –ê–≤—Ç–æ–º–∞—Ç–∏—á–µ—Å–∫–∏–π fallback –Ω–∞ Web Speech API

2. **–î–∏–∞–ª–æ–≥ –∏ —á–∞—Ç** ‚úÖ
   - –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è –≤ —á–∞—Ç–µ
   - –ì–æ–ª–æ—Å–æ–≤—ã–µ —Ñ—Ä–∞–∑—ã –¥–æ–±–∞–≤–ª—è—é—Ç—Å—è –≤ –¥–∏–∞–ª–æ–≥
   - –ù–µ—Ç –æ—à–∏–±–æ–∫ 402 –≤ –∫–æ–Ω—Å–æ–ª–∏

3. **–ö–æ–Ω—Ç–µ–∫—Å—Ç–Ω–∞—è —Å–∏—Å—Ç–µ–º–∞** ‚úÖ
   - –ü–∞–Ω–µ–ª–∏ –∫–æ–Ω—Ç–µ–∫—Å—Ç–∞ —Ä–∞–±–æ—Ç–∞—é—Ç
   - Mock –¥–∞–Ω–Ω—ã–µ –∑–∞–≥—Ä—É–∂–∞—é—Ç—Å—è
   - –ü—Ä–æ—Å—Ç–æ–π –∞–Ω–∞–ª–∏–∑ —Ç–µ–º –∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏

4. **UI –∏ –∏–Ω—Ç–µ—Ä—Ñ–µ–π—Å** ‚úÖ
   - –û–¥–Ω–æ–∫–æ–ª–æ–Ω–æ—á–Ω–∞—è –≤–µ—Ä—Å—Ç–∫–∞
   - –ö–Ω–æ–ø–∫–∏ –∑–∞–ø–∏—Å–∏ —Ä–∞–±–æ—Ç–∞—é—Ç
   - –°—Ç–∞—Ç—É—Å –æ—Ç–æ–±—Ä–∞–∂–∞–µ—Ç—Å—è –∫–æ—Ä—Ä–µ–∫—Ç–Ω–æ

### **–ß—Ç–æ –Ω—É–∂–Ω–æ –∏—Å–ø—Ä–∞–≤–∏—Ç—å –¥–ª—è –ø–æ–ª–Ω–æ–π —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏:**

1. **–ü–æ–ª—É—á–∏—Ç—å –ø—Ä–∞–≤–∏–ª—å–Ω—ã–π DeepGram API –∫–ª—é—á:**
   - –ü–µ—Ä–µ–π—Ç–∏ –Ω–∞ [DeepGram Console](https://console.deepgram.com/)
   - –°–æ–∑–¥–∞—Ç—å –Ω–æ–≤—ã–π –∫–ª—é—á —Å –¥–æ—Å—Ç—É–ø–æ–º –∫ Live Streaming
   - –ö–ª—é—á –¥–æ–ª–∂–µ–Ω –Ω–∞—á–∏–Ω–∞—Ç—å—Å—è —Å `sk-`
   - –û–±–Ω–æ–≤–∏—Ç—å `.env` —Ñ–∞–π–ª

2. **–ü–æ–ø–æ–ª–Ω–∏—Ç—å OpenRouter –∞–∫–∫–∞—É–Ω—Ç:**
   - –î–æ–±–∞–≤–∏—Ç—å —Å—Ä–µ–¥—Å—Ç–≤–∞ –Ω–∞ OpenRouter
   - –ò–ª–∏ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å –¥—Ä—É–≥–æ–π LLM –ø—Ä–æ–≤–∞–π–¥–µ—Ä
   - –í–∫–ª—é—á–∏—Ç—å –æ–±—Ä–∞—Ç–Ω–æ LLM –∞–Ω–∞–ª–∏–∑

## üõ†Ô∏è –¢–µ—Ö–Ω–∏—á–µ—Å–∫–∏–µ –¥–µ—Ç–∞–ª–∏

### **–ò–∑–º–µ–Ω–µ–Ω–Ω—ã–µ —Ñ–∞–π–ª—ã:**

1. **`src/services/voiceServiceFactory.ts`**
   - –î–æ–±–∞–≤–ª–µ–Ω–∞ –ø—Ä–æ–≤–µ—Ä–∫–∞ —Ñ–æ—Ä–º–∞—Ç–∞ API –∫–ª—é—á–∞ DeepGram
   - –£–ª—É—á—à–µ–Ω–æ –ª–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ

2. **`src/services/context/dialogProcessor.ts`**
   - –í—Ä–µ–º–µ–Ω–Ω–æ –æ—Ç–∫–ª—é—á–µ–Ω LLM –∞–Ω–∞–ª–∏–∑ —Ç–µ–º –∏ —Ç–æ–Ω–∞–ª—å–Ω–æ—Å—Ç–∏
   - –ò—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è –ø—Ä–æ—Å—Ç—ã–µ —ç–≤—Ä–∏—Å—Ç–∏—á–µ—Å–∫–∏–µ –º–µ—Ç–æ–¥—ã
   - –£–±—Ä–∞–Ω—ã –Ω–µ–∏—Å–ø–æ–ª—å–∑—É–µ–º—ã–µ –∏–º–ø–æ—Ä—Ç—ã

### **–õ–æ–≥–∏—Ä–æ–≤–∞–Ω–∏–µ:**

- ‚úÖ **DeepGram:** "API key format invalid, using Web Speech API"
- ‚úÖ **Dialog:** "LLM analysis temporarily disabled due to API issues"
- ‚úÖ **Factory:** "Creating Web Speech API voice service"

## üéØ –°–ª–µ–¥—É—é—â–∏–µ —à–∞–≥–∏

1. **–ü–æ–ª—É—á–∏—Ç—å DeepGram API –∫–ª—é—á** - –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ DeepGram
2. **–ü–æ–ø–æ–ª–Ω–∏—Ç—å OpenRouter** - –¥–ª—è –∞–∫—Ç–∏–≤–∞—Ü–∏–∏ LLM –∞–Ω–∞–ª–∏–∑–∞
3. **–ü—Ä–æ—Ç–µ—Å—Ç–∏—Ä–æ–≤–∞—Ç—å –ø–æ–ª–Ω—É—é —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–æ—Å—Ç—å**

## üìä –°—Ç–∞—Ç—É—Å —Å–∏—Å—Ç–µ–º—ã

| –ö–æ–º–ø–æ–Ω–µ–Ω—Ç | –°—Ç–∞—Ç—É—Å | –ü—Ä–∏–º–µ—á–∞–Ω–∏–µ |
|-----------|--------|------------|
| –ì–æ–ª–æ—Å–æ–≤–æ–µ —Ä–∞—Å–ø–æ–∑–Ω–∞–≤–∞–Ω–∏–µ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Web Speech API |
| DeepGram | ‚ö†Ô∏è –û—Ç–∫–ª—é—á–µ–Ω | –ù–µ–≤–µ—Ä–Ω—ã–π API –∫–ª—é—á |
| –î–∏–∞–ª–æ–≥ | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –ë–µ–∑ LLM –∞–Ω–∞–ª–∏–∑–∞ |
| –ß–∞—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | –°–æ–æ–±—â–µ–Ω–∏—è –æ—Ç–æ–±—Ä–∞–∂–∞—é—Ç—Å—è |
| –ö–æ–Ω—Ç–µ–∫—Å—Ç | ‚úÖ –†–∞–±–æ—Ç–∞–µ—Ç | Mock –¥–∞–Ω–Ω—ã–µ |
| LLM –∞–Ω–∞–ª–∏–∑ | ‚ö†Ô∏è –û—Ç–∫–ª—é—á–µ–Ω | 402 Payment Required |

**–°–∏—Å—Ç–µ–º–∞ —Ñ—É–Ω–∫—Ü–∏–æ–Ω–∞–ª—å–Ω–∞ –¥–ª—è –±–∞–∑–æ–≤–æ–≥–æ –∏—Å–ø–æ–ª—å–∑–æ–≤–∞–Ω–∏—è!** üöÄ
